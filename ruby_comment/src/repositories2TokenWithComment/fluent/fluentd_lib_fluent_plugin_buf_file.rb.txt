on_ignored_nl UNK on_tstring_beg on_tstring_content on_tstring_end on_nl on_ignored_nl UNK on_tstring_beg on_tstring_content on_tstring_end on_nl UNK on_tstring_beg on_tstring_content on_tstring_end on_nl UNK on_tstring_beg on_tstring_content # # Fluentd # # Licensed under the Apache License, Version 2.0 (the "License"); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an "AS IS" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. #
on_const on_op on_int on_op on_int on_op on_int on_op on_int on_ignored_nl UNK on_tstring_beg on_tstring_content on_tstring_end on_nl UNK on_symbeg path on_comma on_symbeg # 256MB
on_ignored_nl UNK on_tstring_beg on_tstring_content on_tstring_end on_nl UNK on_symbeg path on_comma on_symbeg UNK on_comma on_label nil on_nl UNK on_tstring_beg on_tstring_content on_tstring_end # 64GB, same with v0.12 (TimeSlicedOutput + buf_file)
UNK on_symbeg UNK on_comma on_symbeg UNK on_comma on_label nil on_ignored_nl def UNK on_nl UNK on_nl on_ivar on_op nil on_nl on_ivar # '0644'
on_ignored_nl def UNK on_nl UNK on_nl on_ivar on_op nil on_nl on_ivar on_op UNK on_nl on_ivar on_op nil on_nl on_ivar on_op # '0755'
else on_ignored_nl UNK on_const on_op on_const on_comma on_tstring_beg on_tstring_content on_tstring_end on_nl end on_nl end on_nl on_ignored_nl UNK on_op on_const on_period # plugin_root_dir path contains worker id
if UNK on_op on_op UNK on_nl on_ivar on_op on_const on_period UNK on_lparen on_ivar on_comma on_tstring_beg on_tstring_content on_embexpr_beg on_ivar on_embexpr_end on_tstring_end # directory
on_ivar on_op on_const on_period UNK on_lparen on_const on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_ivar on_rparen on_comma on_tstring_beg on_tstring_content on_embexpr_beg # worker 0 always checks unflushed buffer chunks to be resumed (might be created while non-multi-worker configuration)
if on_const on_period UNK on_lparen on_ivar on_rparen on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_nl UNK on_const on_period UNK on_lparen # specified path is file path
UNK on_const on_period UNK on_lparen on_ivar on_rparen on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_nl on_ivar on_op on_ivar on_op on_ivar # valid file path
on_ivar on_op on_ivar on_op on_tstring_beg on_tstring_content on_embexpr_beg on_ivar on_embexpr_end on_tstring_end on_nl end on_nl on_ivar on_op UNK on_nl end on_nl on_ignored_nl # existing file will be ignored
def UNK on_nl UNK on_ivar on_nl UNK on_period UNK on_tstring_beg on_tstring_content on_tstring_end on_nl end on_nl on_ivar on_nl end on_nl on_ignored_nl # This method is called only when multi worker is configured
mode on_op on_const on_op on_const on_op on_const on_op on_const on_period UNK on_lparen path on_rparen on_nl if mode on_op on_symbeg UNK # this metadata will be overwritten by resuming .meta file content # so it should not added into @metadata_list for now
UNK on_const on_op on_const on_op on_const on_op on_const on_op on_const on_op UNK on_nl UNK on_lparen path on_comma mode on_comma UNK # file chunk resumes contents of metadata
if UNK on_lparen chunk on_rparen on_op UNK on_period UNK on_lparen chunk on_period metadata on_rparen on_nl chunk on_period metadata on_period UNK # unstaged chunk created at Buffer#write_step_by_step is identified as the staged chunk here because FileChunk#assume_chunk_state checks only the file name. # https://github.com/fluent/fluentd/blob/9d113029d4550ce576d8825bfa9612aa3e55bff0/lib/fluent/plugin/buffer.rb#L663 # This case can happen when fluentd process is killed by signal or other reasons between creating unstaged chunks and changing them to staged mode in Buffer#write # these chunks(unstaged chunks) has shared the same metadata # So perform enqueue step again https://github.com/fluent/fluentd/blob/9d113029d4550ce576d8825bfa9612aa3e55bff0/lib/fluent/plugin/buffer.rb#L364
UNK on_op chunk on_period UNK on_nl else on_ignored_nl UNK UNK chunk on_period metadata UNK on_op chunk on_nl end on_nl UNK # metadata.seq should be 0 for counting @queued_num
UNK on_op on_ivar on_op UNK on_period UNK on_nl chunk on_op on_const on_op on_const on_op on_const on_op on_const on_period UNK on_lparen # FileChunk generates real path with unique_id
on_const on_period UNK on_lparen path on_comma path on_op on_tstring_beg on_tstring_content on_tstring_end on_rparen UNK nil on_nl end on_nl on_ignored_nl UNK on_nl # After support 'backup_dir' feature, these files are moved to backup_dir instead of unlink.
UNK on_period UNK on_lparen UNK on_tstring_content UNK on_rparen UNK on_op UNK on_op on_tstring_beg on_tstring_content on_embexpr_beg UNK on_embexpr_end on_tstring_end UNK on_nl # '{' '}' are special character in Dir.glob
