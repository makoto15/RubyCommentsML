cookie on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl on_ivar on_period add on_lparen url on_comma cookie on_rparen on_nl # Add one cookie with an expiration date in the future
cookie on_op on_const on_op on_const on_period new on_lparen values on_rparen on_nl on_ivar on_period add on_lparen url on_comma cookie on_rparen on_nl # Add one cookie with an expiration date in the future
cookie on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl on_ivar on_period add on_lparen url on_comma cookie on_rparen on_nl # Add one cookie with an expiration date in the future
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_rparen on_nl assert_equal on_lparen on_int on_comma # Add the same cookie, and we should still only have one
assert_equal on_lparen on_int on_comma on_ivar on_period cookies on_lparen on_const on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rparen on_period length on_rparen on_nl on_ignored_nl # Make sure we can get the cookie from different paths
assert_equal on_lparen on_int on_comma on_ivar on_period cookies on_lparen on_const on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rparen on_period length on_rparen on_nl end # Make sure we can't get the cookie from different domains
cookie on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl on_ivar on_period add on_lparen url on_comma cookie on_rparen on_nl # Add one cookie with an expiration date in the future
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen cookie_values on_lparen on_symbeg name on_op on_tstring_beg on_tstring_content on_tstring_end # Add the same cookie, and we should still only have one
assert_equal on_lparen on_int on_comma on_ivar on_period cookies on_lparen on_const on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rparen on_period length on_rparen on_nl on_ignored_nl # Make sure we can get the cookie from different paths
assert_equal on_lparen on_int on_comma on_ivar on_period cookies on_lparen on_const on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rparen on_period length on_rparen on_nl end # Make sure we can't get the cookie from different domains
on_ignored_nl assert_equal on_lparen on_int on_comma on_ivar on_period cookies on_lparen url on_rparen on_period length on_rparen on_nl end on_nl on_ignored_nl def UNK # single dot domain is now treated as no domain # single_dot_cookie = Mechanize::Cookie.new(cookie_values(:domain => '.')) # @jar.add(url, single_dot_cookie)
cookie on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl on_ivar on_period add on_lparen url on_comma cookie on_rparen on_nl # Add one cookie with an expiration date in the future
cookie on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl s_cookie on_op on_const on_op on_const on_period new on_lparen cookie_values # Add one cookie with an expiration date in the future
cookie on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl s_cookie on_op on_const on_op on_const on_period new on_lparen cookie_values # Add one cookie with an expiration date in the future
cookie on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl s_cookie on_op on_const on_op on_const on_period new on_lparen cookie_values # Add one cookie with an expiration date in the future
cookie on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl on_ivar on_period add on_lparen url on_comma cookie on_rparen on_nl # Add one cookie with an expiration date in the future
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen cookie_values on_lparen on_symbeg name on_op on_tstring_beg on_tstring_content on_tstring_end # Add a second cookie
assert_equal on_lparen on_int on_comma on_ivar on_period cookies on_lparen on_const on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rparen on_period length on_rparen on_nl on_ignored_nl # Make sure we can get the cookie from different paths
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen on_ignored_nl cookie_values on_lparen on_symbeg expires on_op on_const on_period # Expire the first cookie
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen on_ignored_nl cookie_values on_lparen on_symbeg name on_op on_tstring_beg on_tstring_content # Expire the second cookie
cookie on_op on_const on_op on_const on_period new on_lparen values on_rparen on_nl on_ivar on_period add on_lparen url on_comma cookie on_rparen on_nl # Add one cookie with an expiration date in the future
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen values on_period merge on_lparen on_symbeg name on_op on_tstring_beg # Add a second cookie
assert_equal on_lparen on_int on_comma on_ivar on_period cookies on_lparen on_const on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rparen on_period length on_rparen on_nl on_ignored_nl # Make sure we can get the cookie from different paths
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen values on_period merge on_lparen on_symbeg expires on_op on_const # Expire the first cookie
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen on_ignored_nl values on_period merge on_lparen on_symbeg name on_op # Expire the second cookie
url on_op on_const on_tstring_beg on_tstring_content on_tstring_end on_nl assert_equal on_tstring_beg on_tstring_end on_comma url on_period UNK on_nl assert_equal on_lparen on_int on_comma on_ivar # When given a URI with a blank path, CookieJar#cookies should return # cookies with the path '/':
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen values on_period merge on_lparen on_symbeg name on_op on_tstring_beg # Now add a cookie with the path set to '/':
cookie on_op on_const on_op on_const on_period new on_lparen values on_rparen on_nl on_ivar on_period add on_lparen url on_comma cookie on_rparen on_nl # Add one cookie with an expiration date in the future
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen values on_period merge on_lparen on_symbeg name on_op on_tstring_beg # Add a second cookie
assert_equal on_lparen on_int on_comma on_ivar on_period cookies on_lparen on_const on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rparen on_period length on_rparen on_nl assert_equal # Make sure we don't get the cookie in a different path
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen values on_period merge on_lparen on_symbeg expires on_op on_const # Expire the first cookie
on_ivar on_period add on_lparen url on_comma on_const on_op on_const on_period new on_lparen values on_period merge on_lparen on_symbeg name on_op on_tstring_beg # Expire the second cookie
cookie on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl on_ivar on_period add on_lparen url on_comma cookie on_rparen on_nl # Add one cookie with an expiration date in the future
end on_nl on_ignored_nl def UNK on_nl values on_op cookie_values on_lparen on_symbeg expires on_op nil on_rparen on_nl UNK on_op values on_period # HACK no asertion
values on_op cookie_values on_lparen on_symbeg expires on_op nil on_rparen on_nl UNK on_op values on_period merge on_lparen on_symbeg name on_op on_tstring_beg # thanks to michal "ocher" ochman for reporting the bug responsible for this test.
UNK on_op on_const on_op on_const on_period new on_lparen cookie_values on_rparen on_nl UNK on_op on_const on_op on_const on_period new on_lparen cookie_values # cookie1 is for *.rubygems.org; cookie2 is only for rubygems.org, no subdomains
assert_equal on_lparen on_int on_comma jar on_period cookies on_lparen top_url on_rparen on_period length on_rparen on_nl assert_equal on_lparen on_int on_comma jar on_period # HACK test the format
UNK on_op on_const on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_nl assert_equal on_lparen on_int on_comma UNK on_period UNK on_lparen UNK # Check that we actually wrote the file correctly (not just that we were # able to read what we wrote): # # * Cookies that only match exactly the domain specified must not have a # leading dot, and must have FALSE as the second field. # * Cookies that match subdomains may have a leading dot, and must have # TRUE as the second field.
