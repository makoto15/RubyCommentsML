UNK on_op on_tstring_beg on_tstring_end on_nl UNK on_op UNK on_nl UNK on_lparen UNK on_op on_tstring_beg on_tstring_content on_tstring_end on_rparen on_nl UNK on_op # gets without readahead
UNK on_op on_ivar on_period UNK on_period UNK on_period UNK on_nl UNK on_comma UNK on_comma UNK on_op UNK on_period UNK on_lparen # Read the request line
UNK on_comma UNK on_comma UNK on_op UNK on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_int on_rparen on_nl on_ignored_nl UNK on_const # Split the request into its 3 parts
UNK on_op on_const on_period new on_nl UNK do on_ignored_nl header on_op on_ivar on_period UNK on_nl if header on_period UNK on_nl # Create an empty header set
UNK do on_ignored_nl header on_op on_ivar on_period UNK on_nl if header on_period UNK on_nl UNK on_const on_nl UNK header on_period # Read each header and populate the header set
on_ignored_nl UNK on_comma UNK on_op UNK on_lbracket on_tstring_beg on_tstring_content on_tstring_end on_rbracket on_period UNK on_lparen UNK UNK on_rparen on_period UNK on_period # At this point, one might want to read the request body, but I don't think we need it.
UNK on_comma UNK on_op UNK on_lbracket on_tstring_beg on_tstring_content on_tstring_end on_rbracket on_period UNK on_lparen UNK UNK on_rparen on_period UNK on_period UNK # Build rack request
UNK on_period UNK on_period UNK do on_op header on_op on_ignored_nl UNK on_lbracket on_tstring_beg on_tstring_content on_tstring_end on_op header on_period UNK on_period # Add request headers to rack hash
UNK on_comma UNK on_comma UNK on_op on_const on_period new on_period UNK on_lparen UNK on_rparen on_nl UNK on_op on_tstring_beg on_tstring_content UNK # Call the rack app and process the result
rescue on_const on_op on_const on_op on_const on_nl rescue on_const on_nl rescue on_op UNK on_nl if UNK on_lparen on_const on_rparen on_nl # We don't really care if a client has disapeared, close the sockets and carry on.
rescue on_const on_nl rescue on_op UNK on_nl if UNK on_lparen on_const on_rparen on_nl on_const on_period UNK on_lparen UNK on_rparen on_nl # Don't worry about SSL negotiation failures, disconnect and carry on
rescue on_op UNK on_nl if UNK on_lparen on_const on_rparen on_nl on_const on_period UNK on_lparen UNK on_rparen on_nl end on_nl UNK # We couldn't read a proper HTTP request, disconnect the client
