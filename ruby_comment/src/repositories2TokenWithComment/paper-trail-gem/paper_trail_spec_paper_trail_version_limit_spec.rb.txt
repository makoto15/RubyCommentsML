on_ignored_nl UNK on_tstring_beg on_tstring_content on_tstring_end on_nl on_ignored_nl UNK on_const on_nl on_op on_const on_period UNK on_const on_comma on_label UNK do on_ignored_nl # frozen_string_literal: true
UNK on_op on_const on_period UNK on_lparen on_label on_tstring_beg on_tstring_content on_tstring_end on_rparen on_ignored_nl on_int on_period UNK do on_op UNK on_op on_ignored_nl # LimitedBicycle overrides the global version_limit
on_ignored_nl on_int on_period UNK do on_op UNK on_op on_ignored_nl UNK on_period UNK on_lparen on_label on_tstring_beg on_tstring_content UNK UNK UNK on_tstring_end # has_paper_trail limit: 3
end on_nl on_ignored_nl UNK on_tstring_beg on_tstring_content on_tstring_end do on_ignored_nl on_const on_period UNK on_period UNK on_op on_int on_nl widget on_op on_const # 4 versions = 3 updates + 1 create.
end on_nl end on_nl on_ignored_nl UNK on_tstring_beg on_tstring_content on_tstring_end do on_ignored_nl UNK on_op on_const on_period UNK on_lparen on_int on_comma on_int # 11 versions = 10 updates + 1 create.
on_lparen on_int on_op on_int on_rparen on_period UNK on_period UNK on_period UNK do on_op UNK on_op on_ignored_nl on_const on_op on_const on_period # Sometimes a database will returns records in a different order than # they were inserted. That's hard to get the database to do, so we'll # just create them out-of-order:
on_ignored_nl on_const on_period UNK on_period UNK on_op on_int on_nl widget on_period versions on_period UNK on_period UNK on_lparen UNK UNK on_rparen # 1 create + 5 updates
on_const on_period UNK on_period UNK on_op on_int on_nl widget on_period versions on_period UNK on_period UNK on_lparen UNK UNK on_rparen on_nl # Now, we've recreated the scenario where we can accidentally clean up # the wrong versions. Re-enable the version_limit, and trigger the # clean-up:
UNK on_lparen widget on_period UNK on_period versions on_period UNK on_rparen on_period UNK UNK on_lparen on_int on_rparen on_ignored_nl UNK on_op widget # Verify that we have fewer versions:
on_ignored_nl UNK on_op widget on_period versions on_period UNK on_period UNK on_lparen on_op UNK UNK on_rparen on_period UNK on_lparen on_op UNK # 1 create + 4 updates
UNK on_op widget on_period versions on_period UNK on_period UNK on_lparen on_op UNK UNK on_rparen on_period UNK on_lparen on_op UNK UNK # Exclude the create, because the create will return nil for `#reify`.
end on_nl end on_nl end on_nl EMP EMP EMP EMP EMP EMP EMP EMP EMP EMP EMP EMP EMP EMP # No matter what order the version records are returned it, we should # always keep the most-recent changes.
