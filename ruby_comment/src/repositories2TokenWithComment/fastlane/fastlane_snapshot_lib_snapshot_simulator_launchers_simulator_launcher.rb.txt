def UNK on_nl cpu_count on_op on_const on_period cpu_count on_nl if cpu_count on_op on_int on_nl return cpu_count on_nl end on_nl on_ignored_nl # With Xcode 9's ability to run tests on multiple concurrent simulators, # this method sets the maximum number of simulators to run simultaneously # to avoid overloading your machine.
UNK on_op UNK on_lparen on_label language on_comma on_label locale on_rparen on_nl on_const on_period UNK on_lparen UNK on_rparen if on_const on_period # Clear logs so subsequent xcodebuild executions don't append to old ones
if launcher_config on_period UNK on_nl UNK on_op launcher_config on_period devices on_nl UNK on_op UNK on_period UNK on_lbrace on_op UNK on_op # Break up the array of devices into chunks that can # be run simultaneously.
UNK on_op UNK on_period UNK on_lbrace on_op UNK on_op on_const on_op on_const on_period UNK on_lparen UNK on_rparen on_rbrace on_period UNK # We have to break up the concurrent simulators by device version too, otherwise there is an error (see #10969)
UNK on_op launcher_config on_period devices on_period UNK on_lbrace on_op UNK on_op on_lbracket UNK on_rbracket on_rbrace on_nl end on_nl on_ignored_nl UNK # Put each device in it's own array to run tests one at a time
on_const on_period UNK on_lparen on_tstring_beg on_tstring_content on_embexpr_beg UNK on_embexpr_end on_tstring_end on_rparen on_nl on_ignored_nl self on_period UNK on_op on_int on_nl if # no exception raised... that means we need to retry
UNK on_lparen devices on_comma language on_comma locale on_comma launch_args on_rparen on_nl UNK retries on_op launcher_config on_period UNK on_nl UNK on_lparen # If the return code is not 65, we should assume its a simulator failure and retry
UNK on_lparen retries on_comma command on_comma language on_comma locale on_comma launch_args on_comma devices on_rparen on_nl UNK on_ignored_nl on_const on_period UNK # If there are retries remaining, run the tests again
on_const on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen if launcher_config on_period UNK on_nl end on_nl end on_rparen on_nl end on_nl # It's important to raise an error, as we don't want to collect the screenshots
UNK on_lparen on_label language on_comma on_label locale on_comma on_label launch_args on_rparen on_nl on_ignored_nl self on_period UNK on_op on_lbracket on_rbracket on_nl # Make sure all needed directories exist for next retry # `copy_screenshots` in `cleanup_after_failure` can delete some needed directories # https://github.com/fastlane/fastlane/issues/10786
self on_period UNK on_op on_lbracket on_rbracket on_nl on_ignored_nl UNK on_lparen retries on_op on_int on_comma on_label command on_comma on_label language on_comma # Clear errors so a successful retry isn't reported as an over failure
def UNK on_nl UNK on_op on_const on_lbracket on_tstring_beg on_embexpr_beg UNK on_embexpr_end on_tstring_content on_tstring_end on_rbracket on_nl UNK on_period UNK on_lparen on_lbrace # This method returns a hash of { device name => [failure messages] } # { # 'iPhone 7': [], # this empty array indicates success # 'iPhone 7 Plus': ["No tests were executed"], # 'iPad Air': ["Launch session expired", "Array out of bounds"] # }
