let on_lparen on_symbeg UNK on_rparen do on_ignored_nl double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_ignored_nl on_label false on_comma on_ignored_nl on_label UNK # SSH configuration information mock
let on_lparen on_symbeg UNK on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_label UNK on_comma on_label UNK on_rparen on_rbrace on_nl # Configuration mock
let on_lparen on_symbeg UNK on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg UNK on_rparen on_lbrace # Provider mock
let on_lparen on_symbeg UNK on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg ssh_info on_rparen on_lbrace # UI mock
let on_lparen on_symbeg ssh_info on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg machine on_rparen do # SSH info mock
let on_lparen on_symbeg machine on_rparen do on_ignored_nl double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_ignored_nl on_label UNK on_comma on_ignored_nl on_label UNK # Machine mock built with previously defined
let on_lparen on_symbeg communicator on_rparen on_lbrace on_ivar on_op UNK on_period UNK on_lparen machine on_rparen on_rbrace on_nl let on_lparen on_symbeg connection # Subject instance to test
let on_lparen on_symbeg connection on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_label nil on_rparen on_rbrace on_nl let on_lparen on_symbeg # Underlying net-ssh connection mock
let on_lparen on_symbeg channel on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg command_channel on_rparen on_lbrace # Base net-ssh connection channel mock
let on_lparen on_symbeg command_channel on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg UNK on_rparen on_lbrace # net-ssh connection channel mock for running commands
let on_lparen on_symbeg UNK on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_label on_int on_rparen on_rbrace on_nl let on_lparen on_symbeg # Default exit data for commands run
let on_lparen on_symbeg UNK on_rparen on_lbrace communicator on_period UNK on_period UNK on_lparen on_symbeg on_const on_rparen on_rbrace on_nl let on_lparen on_symbeg # Marker used for flagging start of output
let on_lparen on_symbeg UNK on_rparen on_lbrace communicator on_period UNK on_period UNK on_lparen on_symbeg on_const on_rparen on_rbrace on_nl let on_lparen on_symbeg # Start marker output when PTY is enabled
let on_lparen on_symbeg UNK on_rparen on_lbrace communicator on_period UNK on_period UNK on_lparen on_symbeg on_const on_rparen on_rbrace on_nl let on_lparen on_symbeg # End marker output when PTY is enabled
let on_lparen on_symbeg UNK on_rparen on_lbrace on_tstring_beg on_tstring_end on_rbrace on_nl let on_lparen on_symbeg UNK on_rparen on_lbrace on_tstring_beg on_tstring_end on_rbrace on_nl # Command output returned on stdout
let on_lparen on_symbeg UNK on_rparen on_lbrace on_tstring_beg on_tstring_end on_rbrace on_nl let on_lparen on_symbeg sftp on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content # Command output returned on stderr
let on_lparen on_symbeg sftp on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg UNK on_rparen on_lbrace # Mock for net-ssh sftp
let on_lparen on_symbeg UNK on_rparen on_lbrace true on_rbrace on_nl on_ignored_nl connection_setup on_op UNK do on_ignored_nl connection on_period UNK on_lparen on_symbeg # Prevent connection patching by default in tests
connection_setup on_op UNK do on_ignored_nl connection on_period UNK on_lparen on_symbeg on_ivar on_comma UNK on_rparen on_nl allow on_lparen connection on_rparen on_period # Setup for commands using the net-ssh connection. This can be reused where needed # by providing to `before`
allow on_lparen communicator on_rparen on_period to receive on_lparen on_symbeg UNK on_rparen on_period and_return on_lparen connection on_rparen on_nl allow on_lparen sftp # Return mocked net-ssh connection during setup
expect on_lparen communicator on_period UNK on_lparen UNK on_rparen on_rparen on_period to eq on_lparen true on_rparen on_nl end on_nl end on_nl # retries are every 0.5 so buffer the timeout just a hair over
