let on_lparen on_symbeg UNK on_rparen do on_ignored_nl double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_ignored_nl on_label on_int on_comma on_ignored_nl on_label nil # SSH configuration information mock
let on_lparen on_symbeg UNK on_rparen on_lbrace false on_rbrace on_nl let on_lparen on_symbeg UNK on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end # Do not insert public key by default
let on_lparen on_symbeg UNK on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_label UNK on_rparen on_rbrace on_nl let on_lparen on_symbeg # Configuration mock
let on_lparen on_symbeg UNK on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg ui on_rparen on_lbrace # Provider mock
let on_lparen on_symbeg ui on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg machine on_rparen do # UI mock
let on_lparen on_symbeg machine on_rparen do on_ignored_nl double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_ignored_nl on_label UNK on_comma on_ignored_nl on_label UNK # Machine mock built with previously defined
let on_lparen on_symbeg UNK on_rparen on_lbrace on_lbrace on_label on_tstring_beg on_tstring_content on_tstring_end on_comma on_label on_int on_rbrace on_rbrace on_nl let on_lparen on_symbeg # SSH information of the machine
let on_lparen on_symbeg communicator on_rparen on_lbrace UNK on_op UNK on_period new on_lparen machine on_rparen on_rbrace on_nl let on_lparen on_symbeg connection # Subject instance to test
let on_lparen on_symbeg connection on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg channel on_rparen on_lbrace # Underlying net-ssh connection mock
let on_lparen on_symbeg channel on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg command_channel on_rparen on_lbrace # Base net-ssh connection channel mock
let on_lparen on_symbeg command_channel on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl let on_lparen on_symbeg UNK on_rparen on_lbrace # net-ssh connection channel mock for running commands
let on_lparen on_symbeg UNK on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_comma on_label on_int on_rparen on_rbrace on_nl let on_lparen on_symbeg # Default exit data for commands run
let on_lparen on_symbeg UNK on_rparen on_lbrace on_tstring_beg on_tstring_content on_tstring_end on_rbrace on_nl let on_lparen on_symbeg command_garbage_marker on_rparen on_lbrace communicator on_period UNK # Core shell command used when starting command connection
let on_lparen on_symbeg command_garbage_marker on_rparen on_lbrace communicator on_period UNK on_period UNK on_lparen on_symbeg on_const on_rparen on_rbrace on_nl let on_lparen on_symbeg # Marker used for flagging start of output
let on_lparen on_symbeg UNK on_rparen on_lbrace communicator on_period UNK on_period UNK on_lparen on_symbeg on_const on_rparen on_rbrace on_nl let on_lparen on_symbeg # Start marker output when PTY is enabled
let on_lparen on_symbeg UNK on_rparen on_lbrace communicator on_period UNK on_period UNK on_lparen on_symbeg on_const on_rparen on_rbrace on_nl let on_lparen on_symbeg # End marker output when PTY is enabled
let on_lparen on_symbeg command_stdout_data on_rparen on_lbrace on_tstring_beg on_tstring_end on_rbrace on_nl let on_lparen on_symbeg command_stderr_data on_rparen on_lbrace on_tstring_beg on_tstring_end on_rbrace on_nl # Command output returned on stdout
let on_lparen on_symbeg command_stderr_data on_rparen on_lbrace on_tstring_beg on_tstring_end on_rbrace on_nl let on_lparen on_symbeg scp on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content # Command output returned on stderr
let on_lparen on_symbeg scp on_rparen on_lbrace double on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_rbrace on_nl on_ignored_nl on_ignored_nl UNK on_op UNK do # Mock for net-ssh scp
UNK on_op UNK do on_ignored_nl allow on_lparen connection on_rparen on_period to receive on_lparen on_symbeg UNK on_rparen on_period and_return false on_nl # Setup for commands using the net-ssh connection. This can be reused where needed # by providing to `before`
allow on_lparen communicator on_rparen on_period to receive on_lparen on_symbeg UNK on_rparen on_period and_return on_lparen connection on_rparen on_nl end on_nl on_ignored_nl # Return mocked net-ssh connection during setup
expect on_lparen communicator on_period wait_for_ready on_lparen UNK on_rparen on_rparen on_period to eq on_lparen true on_rparen on_nl end on_nl end on_nl # retries are every 0.5 so buffer the timeout just a hair over
