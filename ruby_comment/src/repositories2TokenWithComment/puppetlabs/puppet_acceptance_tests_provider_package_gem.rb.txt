UNK agent UNK on_tstring_beg on_tstring_content on_tstring_end UNK on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_nl UNK on_op agent on_period UNK # On a Linux host with only the 'agent' role, the puppet command fails when another Ruby is installed earlier in the PATH: # # [root@agent ~]# env PATH="/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin:/opt/puppetlabs/bin" puppet apply -e ' notify { "Hello": }' # Activating bundler (2.0.2) failed: # Could not find 'bundler' (= 2.0.2) among 5 total gem(s) # To install the version of bundler this project requires, run `gem install bundler -v '2.0.2'` # # Magically, the puppet command succeeds on a Linux host with both the 'master' and 'agent' roles. # # Puppet's Ruby makes a fine target. Unfortunately, it's first in the PATH on Windows: PUP-6134. # Also, privatebindir isn't a directory on Windows, it's a PATH: # https://github.com/puppetlabs/beaker-puppet/blob/master/lib/beaker-puppet/install_utils/aio_defaults.rb # # These tests depend upon testing being confined to /centos-7-x86_64|redhat-7-x86_64/.
UNK on_op on_tstring_beg on_tstring_content on_tstring_end on_nl on_ignored_nl UNK on_op on_tstring_beg on_tstring_content on_tstring_end on_nl on_ignored_nl UNK do on_ignored_nl step on_tstring_beg on_tstring_content # https://github.com/puppetlabs/puppet-agent/blob/master/resources/files/puppet-agent.sh
apply_manifest_on on_lparen agent on_comma UNK on_comma on_symbeg UNK on_op true on_rparen do on_ignored_nl list on_op on on_lparen agent on_comma on_tstring_beg # Install package (with version between 0.5 and 0.7)
apply_manifest_on on_lparen agent on_comma UNK on_comma on_symbeg UNK on_op true on_rparen on_nl on_ignored_nl apply_manifest_on on_lparen agent on_comma UNK on_comma on_symbeg # Reapply same manifest and expect no changes
apply_manifest_on on_lparen agent on_comma UNK on_comma on_symbeg UNK on_op true on_rparen do on_ignored_nl list on_op on on_lparen agent on_comma on_tstring_beg # Install besides existing package (with version between 0.7 and 0.8.1) and expect changes
