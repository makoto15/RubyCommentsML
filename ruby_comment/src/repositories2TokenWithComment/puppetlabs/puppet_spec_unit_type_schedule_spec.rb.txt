allow on_lparen on_const on_rparen on_period to receive on_lparen on_symbeg now on_rparen on_period and_return on_lparen on_const on_period local on_lparen on_int on_comma # Test with the current time at a month's end boundary to ensure we are # advancing the day properly when we push the ending limit out a day. # For example, adding 1 to 31 would throw an error instead of advancing # the date.
allow on_lparen on_const on_rparen on_period to receive on_lparen on_symbeg now on_rparen on_period and_return on_lparen on_const on_period local on_lparen on_int on_comma # Test with the current time at a month's end boundary to ensure we are # advancing the day properly when we push the ending limit out a day. # For example, adding 1 to 31 would throw an error instead of advancing # the date.
previous on_op current on_op on_int on_nl on_ignored_nl allow on_lparen on_const on_rparen on_period to receive on_lparen on_symbeg now on_rparen on_period and_return # Now set the previous time to one minute before that
previous on_op on_const on_period utc on_lparen on_int on_comma on_tstring_beg on_tstring_content on_tstring_end on_comma on_int on_comma on_int on_comma on_int on_comma on_int on_rparen # Reset the previous time to 00:00:00
now on_op previous on_op on_lparen on_int on_op on_int on_rparen on_op on_lparen on_int on_op on_int on_rparen on_nl on_ignored_nl allow on_lparen on_const # Set the current time to 23:59
allow on_lparen on_const on_rparen on_period to receive on_lparen on_symbeg now on_rparen on_period and_return on_lparen now on_rparen on_nl previous on_op on_const # Thursday
on_ignored_nl expect on_lparen on_ivar on_rparen on_period to be_match on_lparen previous on_rparen on_nl end on_nl on_ignored_nl it on_tstring_beg on_tstring_content on_tstring_end do # Sat
allow on_lparen on_const on_rparen on_period to receive on_lparen on_symbeg now on_rparen on_period and_return on_lparen now on_rparen on_nl previous on_op on_const # Thursday
on_ignored_nl expect on_lparen on_ivar on_rparen on_period to_not be_match on_lparen previous on_rparen on_nl end on_nl end on_nl on_ignored_nl describe on_const on_op # Sunday
allow on_lparen on_const on_rparen on_period to receive on_lparen on_symbeg now on_rparen on_period and_return on_lparen on_const on_period local on_lparen on_int on_comma # 2011-05-23 is a Monday
allow on_lparen on_const on_rparen on_period to receive on_lparen on_symbeg now on_rparen on_period and_return on_lparen on_const on_period local on_lparen on_int on_comma # Test with ranges and days-of-week both set. 2011-03-31 was a Thursday.
allow on_lparen on_const on_rparen on_period to receive on_lparen on_symbeg now on_rparen on_period and_return on_lparen on_const on_period local on_lparen on_int on_comma # 2011-03-31 was a Thursday. As the end-time of a day spanning match, that means # we need to match on Wednesday.
