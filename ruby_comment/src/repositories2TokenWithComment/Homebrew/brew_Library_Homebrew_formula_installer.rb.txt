on_ignored_nl require on_tstring_beg on_tstring_content on_tstring_end on_nl require on_tstring_beg on_tstring_content on_tstring_end on_nl require on_tstring_beg on_tstring_content on_tstring_end on_nl require on_tstring_beg on_tstring_content on_tstring_end # frozen_string_literal: true
def self on_period UNK on_nl UNK on_op on_const on_period args on_period UNK on_nl return if UNK on_period empty? on_nl on_ignored_nl # When no build tools are available and build flags are passed through ARGV, # it's necessary to interrupt the user before any sort of installation # can proceed. Only invoked when the user has no developer tools.
if formula on_period linked_keg on_period directory? on_nl message on_op on_heredoc_beg on_nl on_ignored_sp on_embexpr_beg formula on_period name on_embexpr_end on_tstring_content on_embexpr_beg formula # not in initialize so upgrade can unlink the active keg before calling this # function but after instantiating this class so that it can avoid having to # relink the active keg if possible (because it is slow).
message on_op on_heredoc_beg on_nl on_ignored_sp on_tstring_content on_embexpr_beg formula on_period UNK on_embexpr_end on_tstring_content on_embexpr_beg formula on_period name on_embexpr_end on_tstring_content on_heredoc_end end # some other version is already installed *and* linked
begin on_ignored_nl if formula on_period UNK on_op on_lparen UNK on_op on_const on_period UNK on_lparen formula on_period full_name on_rparen on_period UNK # Warn if a more recent version of this formula is available in the tap.
UNK do on_ignored_nl begin on_ignored_nl formula on_period prefix on_period UNK if formula on_period prefix on_period directory? on_nl rescue on_const on_op # rubocop:disable Lint/RescueException # any exceptions must leave us with nothing installed
UNK on_op if formula on_period UNK on_nl on_const on_op on_const on_period UNK formula on_period UNK on_comma on_label formula on_period name # Store the formula used to build the keg in the keg.
false on_nl rescue on_const on_op e on_nl opoo on_heredoc_beg on_nl on_ignored_sp on_embexpr_beg formula on_embexpr_end on_tstring_content on_embexpr_beg e on_period message on_embexpr_end # If the formula name is a fully-qualified name let's silently # ignore it as we don't care about things used in taps that aren't # currently tapped.
opoo on_heredoc_beg on_nl on_ignored_sp on_embexpr_beg formula on_embexpr_end on_tstring_content on_embexpr_beg e on_period message on_embexpr_end on_tstring_content on_ignored_sp on_tstring_content on_embexpr_beg UNK on_period name # If the formula name doesn't exist any more then complain but don't # stop installation from continuing.
f on_period linked_keg on_period UNK on_op f on_period UNK on_period UNK on_nl end on_nl on_ignored_nl raise on_const on_period new on_lparen # rubocop:disable Layout/ElseAlignment
def UNK on_nl UNK on_comma req_deps on_op UNK on_nl UNK on_lparen UNK on_rparen on_nl deps on_op UNK on_lparen req_deps on_op # Compute and collect the dependencies needed by the formula currently # being installed.
def UNK on_lparen deps on_rparen on_ignored_nl UNK on_op deps on_period UNK do on_op dep on_comma UNK on_op on_ignored_nl UNK on_op # Check that each dependency in deps has a bottle available, terminating # abnormally with a BuildToolsError if one or more don't. # Only invoked when the user has no developer tools.
req_deps on_op on_const on_period UNK on_lparen req_deps on_rparen on_nl on_ignored_nl on_lbracket UNK on_comma req_deps on_rbracket on_nl end on_nl on_ignored_nl def # Merge the repeated dependencies, which may have different tags.
UNK do on_ignored_nl tmp_keg on_period UNK on_lparen UNK on_rparen if tmp_keg on_op on_op UNK on_period directory? on_nl linked_keg on_period UNK # rubocop:disable Lint/RescueException
UNK on_nl else on_ignored_nl UNK on_lbrace tmp_keg on_period UNK if tmp_keg on_op directory? on_rbrace on_nl end on_nl on_ignored_nl def caveats # We already attempted to install f as part of another formula's # dependency tree. In that case, don't generate an error, just move on.
on_const on_period UNK on_lparen on_symbeg UNK on_rparen do on_op UNK on_op on_ignored_nl UNK unless UNK on_period UNK on_nl on_ignored_nl on_const # Updates the cache for a particular formula after doing an install
tab on_op on_const on_period UNK on_lparen keg on_rparen on_nl on_const on_period UNK on_nl UNK on_op formula on_period UNK on_lparen on_label # Update tab with actual runtime dependencies
on_const on_period UNK if formula on_period name on_op on_tstring_beg on_tstring_content on_tstring_end on_nl on_ignored_nl if formula on_period name on_op on_tstring_beg on_tstring_content # let's reset Utils.git_available? if we just installed git
if formula on_period name on_op on_tstring_beg on_tstring_content on_tstring_end on_op on_ignored_nl on_op on_const on_period UNK on_nl on_const on_lbracket on_tstring_beg on_tstring_content on_tstring_end # use installed curl when it's needed and available
args on_op UNK on_words_sep on_tstring_content on_words_sep on_embexpr_beg on_const on_embexpr_end on_words_sep on_tstring_content on_words_sep on_tstring_content on_words_sep on_embexpr_beg UNK on_period UNK on_lparen on_const # 1. formulae can modify ENV, so we must ensure that each # installation has a pristine ENV when it starts, forking now is # the easiest way to do this
if e on_period UNK on_const on_nl e on_period formula on_op formula on_nl e on_period options on_op options on_nl end on_nl # rubocop:disable Lint/RescueException
formula on_period UNK on_nl formula on_period prefix on_period UNK if formula on_period prefix on_period directory? on_nl formula on_period UNK on_period # any exceptions must leave us with nothing installed
UNK on_op on_const on_op on_tstring_beg on_tstring_content on_tstring_end on_nl on_ignored_nl begin on_ignored_nl keg on_period UNK on_nl rescue on_const on_op on_const on_op # Hash: conflict file -> backup file
onoe on_tstring_beg on_tstring_content on_tstring_end on_nl puts on_tstring_beg on_tstring_content on_embexpr_beg on_const on_embexpr_end on_tstring_end on_nl puts e on_nl puts e on_period UNK # rubocop:disable Lint/RescueException
onoe on_tstring_beg on_tstring_content on_tstring_end on_nl ohai e on_comma e on_period UNK if debug? on_nl on_const on_period failed on_op true on_nl # rubocop:disable Lint/RescueException
onoe on_tstring_beg on_tstring_content on_tstring_end on_nl puts on_tstring_beg on_tstring_content on_tstring_end on_nl puts on_tstring_beg on_tstring_content on_tstring_end on_nl ohai e on_comma e on_period # rubocop:disable Lint/RescueException
opoo on_tstring_beg on_tstring_content on_tstring_end on_nl puts on_tstring_beg on_tstring_content on_tstring_end on_nl ohai e on_comma e on_period UNK if debug? on_nl on_const # rubocop:disable Lint/RescueException
opoo on_tstring_beg on_tstring_content on_tstring_end on_nl puts on_tstring_beg on_tstring_content on_embexpr_beg formula on_period full_name on_embexpr_end on_tstring_content on_tstring_end on_nl ohai e on_comma e # rubocop:disable Lint/RescueException
