on_ignored_nl require on_tstring_beg on_tstring_content on_tstring_end on_nl require on_tstring_beg on_tstring_content on_tstring_end on_nl require on_tstring_beg on_tstring_content on_tstring_end on_nl require on_tstring_beg on_tstring_content on_tstring_end # frozen_string_literal: true
on_const on_period UNK on_lparen on_label UNK on_comma on_label UNK on_rparen on_nl on_ignored_nl if on_const on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end # Passthrough Git environment variables for e.g. git am
if on_const on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_period UNK on_op on_tstring_beg on_tstring_content on_tstring_end on_nl UNK on_ignored_nl UNK on_op # Depending on user configuration, git may try to invoke gpg.
else on_ignored_nl if UNK on_period UNK on_nl UNK on_op on_const on_period new on_lparen on_const on_period UNK on_lparen on_tstring_beg on_tstring_content on_tstring_end # rubocop:disable Lint/SuppressedException
on_const on_period UNK on_nl on_ignored_nl UNK on_op UNK on_tstring_content on_tstring_end on_period UNK on_nl UNK on_op UNK on_tstring_content on_tstring_end on_period UNK # The cache directory seems like a good place to put patches.
UNK on_op UNK on_tstring_content on_tstring_end on_period UNK on_nl UNK on_op UNK on_tstring_content on_tstring_end on_period UNK on_nl on_ignored_nl if UNK on_op # Store current revision and branch
UNK on_nl end on_nl on_ignored_nl UNK unless UNK on_period stable on_nl on_ignored_nl UNK on_op on_lbracket UNK on_period stable on_period url # rubocop:disable Lint/RescueException # Make sure we catch syntax errors.
message on_op on_tstring_beg on_tstring_content on_embexpr_beg UNK on_embexpr_end on_tstring_end unless message on_period UNK UNK on_nl end on_nl on_ignored_nl if UNK on_period # If this is a pull request, append a close message.
on_ivar on_op url on_op on_tstring_beg on_tstring_content on_tstring_end on_nl on_ivar on_op on_const on_op on_const on_period UNK on_lparen UNK on_rparen on_nl on_ivar # GitHub provides commits/pull-requests raw patches using this URL.
on_ignored_nl UNK on_tstring_beg on_tstring_content on_tstring_end on_nl UNK on_op on_lbracket on_rbracket on_nl UNK on_op if on_ivar on_period UNK on_op on_ivar on_period # Applies a patch previously downloaded with fetch_patch() # Deletes the patch file as a side effect, regardless of success
UNK on_op if on_ivar on_period UNK on_op on_ivar on_period clean? on_nl on_tstring_beg on_tstring_content on_tstring_end on_nl else on_ignored_nl on_tstring_beg on_tstring_content on_tstring_end # Normally we don't want whitespace errors, but squashing them can break # patches so an option is provided to skip this step.
UNK on_op on_tstring_beg on_tstring_content on_tstring_end on_nl UNK on_op UNK on_nl on_ignored_nl UNK on_ignored_nl UNK on_tstring_beg on_tstring_content on_tstring_end on_comma on_tstring_beg on_tstring_content # Fall back to three-way merge if patch does not apply cleanly
def UNK on_lparen UNK on_comma tap on_rparen on_ignored_nl UNK on_op on_lbracket on_rbracket on_nl formulae on_op on_lbracket on_rbracket on_nl UNK on_op # List files changed by a patch, partitioned in to those that are (probably) # formula definitions, and those which aren't. Only applies to patches on # Homebrew core or taps, based simply on relative pathnames of affected files.
def UNK on_lparen UNK on_rparen on_ignored_nl UNK on_op on_const on_period UNK on_lparen UNK on_rparen on_nl UNK on_op UNK UNK on_nl # Get current formula versions without loading formula definition in this process. # Returns info as a hash (type => version), for pull.rb's internal use. # Uses special key `:nonexistent => true` for nonexistent formulae.
UNK on_op if new on_lbracket on_symbeg stable on_rbracket on_nl new on_lbracket on_symbeg stable on_rbracket on_nl UNK new on_lbracket on_symbeg devel # New formula
subject_strs on_op on_lbracket on_rbracket on_nl UNK on_op formula on_period name on_nl if UNK on_lbracket on_symbeg stable on_rbracket on_op new on_lbracket # Update to existing formula
else on_ignored_nl subject_strs on_op new on_lbracket on_symbeg stable on_rbracket on_nl end on_nl end on_nl if UNK on_lbracket on_symbeg devel on_rbracket # just for cosmetics
if on_op new on_lbracket on_symbeg stable on_rbracket on_period UNK on_op UNK on_lbracket on_symbeg stable on_rbracket on_op new on_lbracket on_symbeg stable # Only bother mentioning if there's no accompanying stable change
end on_nl else on_ignored_nl subject_strs on_op on_tstring_beg on_embexpr_beg new on_lbracket on_symbeg devel on_rbracket on_embexpr_end on_tstring_content on_tstring_end on_nl end on_nl end # just for cosmetics
