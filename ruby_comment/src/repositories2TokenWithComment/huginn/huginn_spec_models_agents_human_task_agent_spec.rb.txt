on_ivar on_period memory on_lbracket on_tstring_beg on_tstring_content on_tstring_end on_rbracket on_op on_lbrace on_rbrace on_nl on_ivar on_period memory on_lbracket on_tstring_beg on_tstring_content on_tstring_end on_rbracket # It knows about two HITs from two different events.
on_ignored_nl mock on_lparen on_const on_op on_const on_rparen on_period new on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_lbrace on_const on_period new on_rbrace on_nl # It sees 3 HITs.
mock on_lparen on_const on_op on_const on_rparen on_period new on_lparen on_tstring_beg on_tstring_content on_tstring_end on_rparen on_lbrace on_const on_period new on_rbrace on_nl mock # It looksup the two HITs that it owns. Neither are ready yet.
mock on_period UNK on_lparen on_const on_rparen on_period answers on_period times on_lparen on_int on_rparen on_nl on_ignored_nl on_ivar on_period send on_symbeg review_hits # One of the assignments isn't set to "Submitted", so this should get skipped for now.
mock on_period UNK on_lparen on_const on_rparen on_period answers on_period times on_lparen on_int on_rparen on_nl on_ignored_nl on_ivar on_period send on_symbeg review_hits # One of the assignments hasn't shown up yet, so this should get skipped for now.
on_ivar on_period options on_period UNK on_symbeg UNK on_nl on_ivar on_period options on_lbracket on_tstring_beg on_tstring_content on_tstring_end on_rbracket on_op on_tstring_beg on_tstring_content on_tstring_end # it should accept 'take_majority': 'true' as well for legacy support. Demonstrating that here.
assignments on_op on_lbracket on_ignored_nl on_const on_period new on_lparen on_symbeg status on_op on_tstring_beg on_tstring_content on_tstring_end on_comma on_symbeg answers on_op on_lbrace on_tstring_beg # Mock out the HIT's submitted assignments.
on_ignored_nl question_form on_op nil on_nl hitinterface on_op on_const on_period new on_nl hitinterface on_period id on_op on_tstring_beg on_tstring_content on_tstring_end on_nl mock # Setup mocks for HIT creation
on_ignored_nl expect on_lbrace on_ignored_nl on_ivar on_period send on_symbeg review_hits on_nl on_rbrace on_period to change on_lbrace on_const on_period count on_rbrace on_period # And finally, the test.
on_ignored_nl on_ignored_nl expect on_lparen assignments on_period all? on_lbrace on_op a on_op a on_period approved on_op true on_rbrace on_rparen on_period to # it does not emit an event until all poll results are in
on_ignored_nl expect on_lparen assignments on_period all? on_lbrace on_op a on_op a on_period approved on_op true on_rbrace on_rparen on_period to be_truthy # it approves the existing assignments
on_ignored_nl expect on_lparen hitinterface on_period max_assignments on_rparen on_period to eq on_lparen on_ivar on_period options on_lbracket on_tstring_beg on_tstring_content on_tstring_end on_rbracket on_lbracket # it creates a new HIT for the poll
assignments on_op on_lbracket on_ignored_nl on_const on_period new on_lparen on_symbeg status on_op on_tstring_beg on_tstring_content on_tstring_end on_comma on_symbeg answers on_op on_lbrace on_tstring_beg # Mock out the HIT's submitted assignments.
on_ignored_nl expect on_lparen on_ivar on_period events on_period last on_period payload on_lbracket on_tstring_beg on_tstring_content on_tstring_end on_rbracket on_rparen on_period to eq on_lparen # It emits an event
on_ignored_nl expect on_lparen assignments on_period all? on_lbrace on_op a on_op a on_period approved on_op true on_rbrace on_rparen on_period to be_truthy # it approves the existing assignments
